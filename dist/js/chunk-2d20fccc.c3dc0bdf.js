(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d20fccc"],{b4bf:function(t,e,o){"use strict";o.r(e);var a=o("7a23"),c={class:"DashMain"},n={class:"container"},l={class:"text-end"},s={class:"table-responsive"},d={class:"table table-success table-striped table-hover mt-3"},u=Object(a["g"])("thead",null,[Object(a["g"])("tr",null,[Object(a["g"])("th",null,"名稱"),Object(a["g"])("th",null,"折扣百分比"),Object(a["g"])("th",null,"到期日"),Object(a["g"])("th",null,"是否啟用"),Object(a["g"])("th",{class:"text-center"},"編輯")])],-1),i={key:0,class:"text-success fw-bold"},b={key:1,class:"text-danger fw-bold"},p={class:"text-center"},r={class:"btn-group"},j=Object(a["f"])("> ");function O(t,e,o,O,m,g){var h=Object(a["x"])("couponModal"),f=Object(a["x"])("delModal");return Object(a["s"])(),Object(a["d"])(a["a"],null,[Object(a["g"])("div",c,[Object(a["g"])("div",n,[Object(a["g"])("div",l,[Object(a["g"])("button",{type:"button",class:"btn btn-primary mt-5",onClick:e[1]||(e[1]=function(t){return g.openModal(!0)})},"新增優惠卷")]),Object(a["g"])("div",s,[Object(a["g"])("table",d,[u,Object(a["g"])("tbody",null,[(Object(a["s"])(!0),Object(a["d"])(a["a"],null,Object(a["w"])(m.coupons,(function(e){return Object(a["s"])(),Object(a["d"])("tr",{key:e.id},[Object(a["g"])("td",null,Object(a["A"])(e.title),1),Object(a["g"])("td",null,Object(a["A"])(e.percent)+"%",1),Object(a["g"])("td",null,Object(a["A"])(t.$filters.date(e.due_date)),1),Object(a["g"])("td",null,[1===e.is_enabled?(Object(a["s"])(),Object(a["d"])("span",i,"啟用")):(Object(a["s"])(),Object(a["d"])("span",b,"停用"))]),Object(a["g"])("td",p,[Object(a["g"])("div",r,[Object(a["g"])("button",{class:"btn btn-secondary",onClick:function(t){return g.openModal(!1,e)}},"編輯",8,["onClick"]),Object(a["g"])("button",{class:"btn btn-danger",onClick:function(t){return g.delModal(e)}},"刪除",8,["onClick"])])])])})),128))])])])]),Object(a["g"])(h,{ref:"couponModal",data:m.tempCoupon,onUpdateCoupon:g.updateCoupon,isNew:m.isNew},null,8,["data","onUpdateCoupon","isNew"]),Object(a["g"])(f,{ref:"dcModal",data:m.tempCoupon,onUpdateDelete:g.updateDelete},null,8,["data","onUpdateDelete"])]),j],64)}var m=o("5530"),g=(o("99af"),{class:"modal fade",id:"couponModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"}),h={class:"modal-dialog",role:"document"},f={class:"modal-content"},v={class:"modal-header bg-primary text-white"},C=Object(a["g"])("h5",{class:"modal-title",id:"exampleModalLabel"},null,-1),M={key:0},w={key:1},y=Object(a["g"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),_={class:"modal-body"},x={class:"mb-3"},k=Object(a["g"])("label",{for:"title"},"標題",-1),D={class:"mb-3"},U=Object(a["g"])("label",{for:"coupon_code"},"優惠碼",-1),$={class:"mb-3"},N=Object(a["g"])("label",{for:"due_date"},"到期日",-1),I={class:"mb-3"},V=Object(a["g"])("label",{for:"price"},"折扣百分比",-1),E={class:"mb-3"},A={class:"form-check"},L=Object(a["g"])("label",{class:"form-check-label",for:"is_enabled"}," 是否啟用 ",-1),J={class:"modal-footer"},S=Object(a["g"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function q(t,e,o,c,n,l){return Object(a["s"])(),Object(a["d"])("div",g,[Object(a["g"])("div",h,[Object(a["g"])("div",f,[Object(a["g"])("div",v,[C,o.isNew?(Object(a["s"])(),Object(a["d"])("span",M,"新增優惠券")):(Object(a["s"])(),Object(a["d"])("span",w,"編輯優惠券")),y]),Object(a["g"])("div",_,[Object(a["g"])("div",x,[k,Object(a["I"])(Object(a["g"])("input",{type:"text",class:"form-control",id:"title",placeholder:"請輸入標題","onUpdate:modelValue":e[1]||(e[1]=function(t){return n.tempCoupon.title=t})},null,512),[[a["E"],n.tempCoupon.title]])]),Object(a["g"])("div",D,[U,Object(a["I"])(Object(a["g"])("input",{type:"text",class:"form-control",id:"coupon_code","onUpdate:modelValue":e[2]||(e[2]=function(t){return n.tempCoupon.code=t}),placeholder:"請輸入優惠碼"},null,512),[[a["E"],n.tempCoupon.code]])]),Object(a["g"])("div",$,[N,Object(a["I"])(Object(a["g"])("input",{type:"date",class:"form-control",id:"due_date","onUpdate:modelValue":e[3]||(e[3]=function(t){return n.due_date=t})},null,512),[[a["E"],n.due_date]])]),Object(a["g"])("div",I,[V,Object(a["I"])(Object(a["g"])("input",{type:"number",class:"form-control",id:"price",min:"0","onUpdate:modelValue":e[4]||(e[4]=function(t){return n.tempCoupon.percent=t}),placeholder:"請輸入折扣百分比"},null,512),[[a["E"],n.tempCoupon.percent,void 0,{number:!0}]])]),Object(a["g"])("div",E,[Object(a["g"])("div",A,[Object(a["I"])(Object(a["g"])("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=function(t){return n.tempCoupon.is_enabled=t}),"true-value":1,"false-value":0,id:"is_enabled"},null,512),[[a["D"],n.tempCoupon.is_enabled]]),L])])]),Object(a["g"])("div",J,[S,Object(a["g"])("button",{type:"button",class:"btn btn-primary",onClick:e[6]||(e[6]=function(e){return t.$emit("update-coupon",n.tempCoupon)})},"更新優惠券")])])])],512)}var z=o("9641"),B={props:["data","isNew"],data:function(){return{tempCoupon:{},due_date:""}},watch:{data:function(){this.tempCoupon=this.data,this.due_date=new Date(1e3*this.tempCoupon.due_date).toLocaleDateString()},due_date:function(){this.tempCoupon.due_date=Math.floor(new Date(this.due_date)/1e3)}},mixins:[z["a"]]};B.render=q;var F=B,G=o("6ff1"),H={data:function(){return{coupons:[],tempCoupon:{},isNew:!1}},components:{couponModal:F,delModal:G["a"]},methods:{getCoupons:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,o="".concat("https://vue3-course-api.hexschool.io/","api/").concat("jamestsai","/admin/coupons?").concat(e);this.$http.get(o).then((function(e){e.data.success&&(t.coupons=e.data.coupons)}))},openModal:function(t,e){this.isNew=t,this.tempCoupon=t?{due_date:Math.floor(Date.now()/1e3),is_enabled:0,percent:100}:Object(m["a"])({},e),this.$refs.couponModal.openModal()},updateCoupon:function(t){var e=this,o="".concat("https://vue3-course-api.hexschool.io/","api/").concat("jamestsai","/admin/coupon"),a="post";this.isNew||(a="put",o="".concat("https://vue3-course-api.hexschool.io/","api/").concat("jamestsai","/admin/coupon/").concat(t.id)),this.$http[a](o,{data:t}).then((function(t){t.data.success?(alert(t.data.message),e.getCoupons(),e.$refs.couponModal.hideModal()):alert(t.data.message)})).catch((function(t){console.log(t)}))},delModal:function(t){this.tempCoupon=Object(m["a"])({},t),this.$refs.dcModal.openModal()},updateDelete:function(t){var e=this,o="".concat("https://vue3-course-api.hexschool.io/","api/").concat("jamestsai","/admin/coupon/").concat(t);this.$http.delete(o).then((function(t){t.data.success?(alert(t.data.message),e.getCoupons(),e.$refs.dcModal.hideModal()):alert(t.data.message)})).catch((function(t){console.log(t)}))}},created:function(){this.getCoupons()}};H.render=O;e["default"]=H}}]);
//# sourceMappingURL=chunk-2d20fccc.c3dc0bdf.js.map