(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2102cc"],{b789:function(t,e,c){"use strict";c.r(e);var a=c("7a23"),o={class:"cart"},r=Object(a["createVNode"])("div",{class:"banner bg-cover"},null,-1),n={class:"container mt-5"},i={class:"row"},l={class:"col text-center"},s=Object(a["createVNode"])("h2",{class:"fw-bold mb-5"},"購物車",-1),d={key:1,class:"table-responsive-xxl"},u={class:"table fs-4 align-middle table-borderless"},b=Object(a["createVNode"])("thead",{class:"border-bottom border-dark"},[Object(a["createVNode"])("tr",null,[Object(a["createVNode"])("th",null,"產品圖片"),Object(a["createVNode"])("th",null,"產品名稱"),Object(a["createVNode"])("th",null,"數量"),Object(a["createVNode"])("th",null,"價格"),Object(a["createVNode"])("th",null,"刪除")])],-1),h={class:"btn-group",role:"group","aria-label":"Basic example"},p=Object(a["createVNode"])("i",{class:"bi bi-dash-lg text-white"},null,-1),j=Object(a["createVNode"])("i",{class:"bi bi-plus-lg text-white"},null,-1),O=Object(a["createVNode"])("i",{class:"bi bi-x-square"},null,-1),f=Object(a["createVNode"])("td",{colspan:"5",class:"fw-bold text-end"},"總計:",-1),g={class:"text-danger fw-bold"},m={key:2,class:"noCart"},V=Object(a["createVNode"])("h4",{class:"fw-bold mb-5"},"哎呀！您的購物車是空的，趕快去挑選商品吧！",-1),N=Object(a["createVNode"])("img",{src:"https://upload.cc/i1/2021/07/13/OGfKXe.jpg",alt:""},null,-1),v=Object(a["createVNode"])("a",{href:"#/products",class:"btn-custom2 hvr-shutter-out-horizontal my-2"},[Object(a["createVNode"])("i",{class:"bi bi-reply-fill"}),Object(a["createTextVNode"])("立刻購物")],-1),y={key:3,class:"btn d-flex justify-content-between"},k=Object(a["createVNode"])("a",{href:"#/products",class:"btn-custom2 hvr-shutter-out-horizontal my-2"},[Object(a["createVNode"])("i",{class:"bi bi-reply-fill"}),Object(a["createTextVNode"])("繼續購物")],-1),C=Object(a["createVNode"])("a",{href:"#/checkout",class:"btn-custom hvr-bounce-to-right my-2"},"下一步",-1);function w(t,e,c,w,x,D){var L=Object(a["resolveComponent"])("Loading"),B=Object(a["resolveComponent"])("DelModal");return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],null,[Object(a["createVNode"])(L,{active:x.isLoading},null,8,["active"]),Object(a["createVNode"])("div",o,[r,Object(a["createVNode"])("div",n,[Object(a["createVNode"])("div",i,[Object(a["createVNode"])("div",l,[s,0!==x.cartData.length?(Object(a["openBlock"])(),Object(a["createBlock"])("a",{key:0,href:"#",class:"btn-custom hvr-bounce-to-right mb-2",onClick:e[1]||(e[1]=Object(a["withModifiers"])((function(){return D.allDelete&&D.allDelete.apply(D,arguments)}),["prevent"]))},"全部刪除")):Object(a["createCommentVNode"])("",!0),0!==x.cartData.length?(Object(a["openBlock"])(),Object(a["createBlock"])("div",d,[Object(a["createVNode"])("table",u,[b,Object(a["createVNode"])("tbody",null,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(x.cartData,(function(t){return Object(a["openBlock"])(),Object(a["createBlock"])("tr",{key:t.id,class:"border-bottom"},[Object(a["createVNode"])("td",null,[Object(a["createVNode"])("img",{src:t.product.imageUrl,alt:""},null,8,["src"])]),Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(t.product.title),1),Object(a["createVNode"])("td",null,[Object(a["createVNode"])("div",h,[Object(a["createVNode"])("button",{type:"button",onClick:function(e){return D.reduceQty(t)},class:["btn btn-primary",{disabled:1===t.qty}]},[p],10,["onClick"]),Object(a["withDirectives"])(Object(a["createVNode"])("input",{type:"number",min:"1",class:"form-control text-center rounded-0",onChange:function(e){return D.updateCart(t)},"onUpdate:modelValue":function(e){return t.qty=e}},null,40,["onChange","onUpdate:modelValue"]),[[a["vModelText"],t.qty,void 0,{number:!0}]]),Object(a["createVNode"])("button",{type:"button",onClick:function(e){return D.addQty(t)},class:"btn btn-primary"},[j],8,["onClick"])])]),Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(t.product.price),1),Object(a["createVNode"])("td",null,[Object(a["createVNode"])("a",{href:"#",class:"text-danger",onClick:Object(a["withModifiers"])((function(e){return D.delSingle(t)}),["prevent"])},[O],8,["onClick"])])])})),128))]),Object(a["createVNode"])("tfoot",null,[Object(a["createVNode"])("tr",null,[f,Object(a["createVNode"])("td",g,"$"+Object(a["toDisplayString"])(x.totalPrice),1)])])])])):(Object(a["openBlock"])(),Object(a["createBlock"])("div",m,[V,N,v])),0!==x.cartData.length?(Object(a["openBlock"])(),Object(a["createBlock"])("div",y,[k,C])):Object(a["createCommentVNode"])("",!0)])])]),Object(a["createVNode"])(B,{ref:"del",data:x.tempProduct,onUpdateDelete:D.updateDelete},null,8,["data","onUpdateDelete"])])],64)}var x=c("5530"),D=(c("99af"),c("159b"),c("6ff1")),L={data:function(){return{isLoading:!1,cartData:[],tempProduct:{},totalPrice:0}},inject:["emitter"],components:{DelModal:D["a"]},methods:{getCart:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("jamestsai","/cart");this.isLoading=!0,this.$http.get(e).then((function(e){e.data.success&&(t.cartData=e.data.data.carts,t.getTotalPrice(),t.isLoading=!1)}))},delSingle:function(t){this.tempProduct=Object(x["a"])({},t),this.$refs.del.openModal()},updateDelete:function(t){var e=this,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("jamestsai","/cart/").concat(t);this.isLoading=!0,this.$http.delete(c).then((function(t){t.data.success&&(e.isLoading=!1,e.getCart(),e.$sweetalert2(t),e.getTotalPrice(),e.emitter.emit("update-cart"))})),this.$refs.del.hideModal()},allDelete:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("jamestsai","/carts");this.isLoading=!0,this.$http.delete(e).then((function(e){e.data.success&&(t.$sweetalert2(e),t.emitter.emit("update-cart"),t.isLoading=!1,t.getCart())}))},getTotalPrice:function(){var t=this,e=this;e.totalPrice=0,e.cartData.forEach((function(e){t.totalPrice+=e.total}))},addQty:function(t){var e=this;this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("jamestsai","/cart/").concat(t.id);t.qty+=1;var a={product_id:t.id,qty:t.qty};this.$http.put(c,{data:a}).then((function(t){t.data.success&&(e.$sweetalert2(t),e.getCart(),e.isLoading=!1)}))},reduceQty:function(t){var e=this;this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("jamestsai","/cart/").concat(t.id);t.qty-=1;var a={product_id:t.id,qty:t.qty};this.$http.put(c,{data:a}).then((function(t){t.data.success&&(e.$sweetalert2(t),e.getCart(),e.isLoading=!1)}))},updateCart:function(t){var e=this;this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("jamestsai","/cart/").concat(t.id),a={product_id:t.id,qty:t.qty};this.$http.put(c,{data:a}).then((function(c){c.data.success&&(e.$sweetalert2(c),e.getCart(),e.isLoading=!1),c.data.success&&0===t.qty&&e.updateDelete(t.id)}))}},created:function(){this.getCart()}};L.render=w;e["default"]=L}}]);
//# sourceMappingURL=chunk-2d2102cc.f55a5189.js.map