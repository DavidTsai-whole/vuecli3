{"version":3,"sources":["webpack:///./src/views/Cart.vue","webpack:///./src/views/Cart.vue?7a75"],"names":["class","role","aria-label","colspan","src","alt","href","active","isLoading","cartData","length","allDelete","item","key","id","product","imageUrl","title","type","reduceQty","qty","min","updateCart","addQty","price","delSingle","totalPrice","ref","data","tempProduct","updateDelete","inject","components","DelModal","methods","getCart","api","this","$http","get","then","res","success","carts","getTotalPrice","$refs","del","openModal","delete","$sweetalert2","emitter","emit","hideModal","vm","forEach","total","cart","product_id","put","created","render"],"mappings":"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","file":"js/chunk-2d2102cc.65bdc187.js","sourcesContent":["<template>\r\n  <Loading :active=\"isLoading\"></Loading>\r\n  <div class=\"cart\">\r\n    <div class=\"banner bg-cover\"></div>\r\n    <div class=\"container mt-5\">\r\n      <div class=\"row\">\r\n        <div class=\"col text-center\">\r\n          <h2 class=\"fw-bold mb-5\">購物車</h2>\r\n          <a\r\n            href=\"#\"\r\n            class=\"btn-custom hvr-bounce-to-right mb-2\"\r\n            v-if=\"cartData.length !== 0\"\r\n            @click.prevent=\"allDelete\"\r\n            >全部刪除</a\r\n          >\r\n          <table\r\n            class=\"table fs-4 align-middle table-borderless\"\r\n            v-if=\"cartData.length !== 0\"\r\n          >\r\n            <thead class=\"border-bottom border-dark\">\r\n              <tr>\r\n                <th>產品圖片</th>\r\n                <th>產品名稱</th>\r\n                <th>數量</th>\r\n                <th>價格</th>\r\n                <th>刪除</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr v-for=\"item in cartData\" :key=\"item.id\" class=\"border-bottom\">\r\n                <td>\r\n                  <img :src=\"item.product.imageUrl\" alt=\"\" />\r\n                </td>\r\n                <td>{{ item.product.title }}</td>\r\n                <td>\r\n                  <div class=\"btn-group\" role=\"group\" aria-label=\"Basic example\">\r\n                    <button\r\n                      type=\"button\"\r\n                      @click=\"reduceQty(item)\"\r\n                      class=\"btn btn-primary\"\r\n                      :class=\"{ disabled: item.qty === 1 }\"\r\n                    >\r\n                      <i class=\"bi bi-dash-lg text-white\"></i>\r\n                    </button>\r\n                    <input\r\n                      type=\"number\"\r\n                      min=\"1\"\r\n                      class=\"form-control text-center rounded-0\"\r\n                      @change=\"updateCart(item)\"\r\n                      v-model.number=\"item.qty\"\r\n                    />\r\n                    <button type=\"button\" @click=\"addQty(item)\" class=\"btn btn-primary\">\r\n                      <i class=\"bi bi-plus-lg text-white\"></i>\r\n                    </button>\r\n                  </div>\r\n                </td>\r\n                <td>{{ item.product.price }}</td>\r\n                <td>\r\n                  <a href=\"#\" class=\"text-danger\" @click.prevent=\"delSingle(item)\">\r\n                    <i class=\"bi bi-x-square\"></i>\r\n                  </a>\r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n            <tfoot>\r\n              <tr>\r\n                <td colspan=\"5\" class=\"fw-bold text-end\">總計:</td>\r\n                <td class=\"text-danger fw-bold\">${{ totalPrice }}</td>\r\n              </tr>\r\n            </tfoot>\r\n          </table>\r\n          <div class=\"noCart\" v-else>\r\n            <h4 class=\"fw-bold mb-5\">哎呀！您的購物車是空的，趕快去挑選商品吧！</h4>\r\n            <img src=\"https://upload.cc/i1/2021/07/13/OGfKXe.jpg\" alt=\"\" />\r\n            <a href=\"#/products\" class=\"btn-custom2 hvr-shutter-out-horizontal my-2\"\r\n              ><i class=\"bi bi-reply-fill\"></i>立刻購物</a\r\n            >\r\n          </div>\r\n          <div class=\"btn d-flex justify-content-between\" v-if=\"cartData.length !== 0\">\r\n            <a href=\"#/products\" class=\"btn-custom2 hvr-shutter-out-horizontal my-2\"\r\n              ><i class=\"bi bi-reply-fill\"></i>繼續購物</a\r\n            >\r\n            <a href=\"#/checkout\" class=\"btn-custom hvr-bounce-to-right my-2\">下一步</a>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <DelModal ref=\"del\" :data=\"tempProduct\" @update-delete=\"updateDelete\"></DelModal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport DelModal from '@/components/DelModal.vue'\r\nexport default {\r\n  data () {\r\n    return {\r\n      isLoading: false,\r\n      cartData: [],\r\n      tempProduct: {},\r\n      totalPrice: 0\r\n    }\r\n  },\r\n  inject: ['emitter'],\r\n  components: {\r\n    DelModal\r\n  },\r\n  methods: {\r\n    getCart () {\r\n      const api = `${process.env.VUE_APP_URL}api/${process.env.VUE_APP_PATH}/cart`\r\n      this.isLoading = true\r\n      this.$http.get(api).then((res) => {\r\n        if (res.data.success) {\r\n          this.cartData = res.data.data.carts\r\n          this.getTotalPrice()\r\n          this.isLoading = false\r\n        }\r\n      })\r\n    },\r\n    delSingle (item) {\r\n      this.tempProduct = { ...item }\r\n      this.$refs.del.openModal()\r\n    },\r\n    updateDelete (id) {\r\n      const api = `${process.env.VUE_APP_URL}api/${process.env.VUE_APP_PATH}/cart/${id}`\r\n      this.isLoading = true\r\n      this.$http.delete(api).then((res) => {\r\n        if (res.data.success) {\r\n          this.isLoading = false\r\n          this.getCart()\r\n          this.$sweetalert2(res)\r\n          this.getTotalPrice()\r\n          this.emitter.emit('update-cart')\r\n        }\r\n      })\r\n      this.$refs.del.hideModal()\r\n    },\r\n    allDelete () {\r\n      const api = `${process.env.VUE_APP_URL}api/${process.env.VUE_APP_PATH}/carts`\r\n      this.isLoading = true\r\n      this.$http.delete(api).then((res) => {\r\n        if (res.data.success) {\r\n          this.$sweetalert2(res)\r\n          this.emitter.emit('update-cart')\r\n          this.isLoading = false\r\n          this.getCart()\r\n        }\r\n      })\r\n    },\r\n    getTotalPrice () {\r\n      const vm = this\r\n      vm.totalPrice = 0\r\n      vm.cartData.forEach((item) => {\r\n        this.totalPrice += item.total\r\n      })\r\n    },\r\n    addQty (item) {\r\n      this.isLoading = true\r\n      const api = `${process.env.VUE_APP_URL}api/${process.env.VUE_APP_PATH}/cart/${item.id}`\r\n      item.qty += 1\r\n      const cart = {\r\n        product_id: item.id,\r\n        qty: item.qty\r\n      }\r\n      this.$http.put(api, { data: cart }).then((res) => {\r\n        if (res.data.success) {\r\n          this.$sweetalert2(res)\r\n          this.getCart()\r\n          this.isLoading = false\r\n        }\r\n      })\r\n    },\r\n    reduceQty (item) {\r\n      this.isLoading = true\r\n      const api = `${process.env.VUE_APP_URL}api/${process.env.VUE_APP_PATH}/cart/${item.id}`\r\n      item.qty -= 1\r\n      const cart = {\r\n        product_id: item.id,\r\n        qty: item.qty\r\n      }\r\n      this.$http.put(api, { data: cart }).then((res) => {\r\n        if (res.data.success) {\r\n          this.$sweetalert2(res)\r\n          this.getCart()\r\n          this.isLoading = false\r\n        }\r\n      })\r\n    },\r\n    updateCart (item) {\r\n      this.isLoading = true\r\n      const api = `${process.env.VUE_APP_URL}api/${process.env.VUE_APP_PATH}/cart/${item.id}`\r\n      const cart = {\r\n        product_id: item.id,\r\n        qty: item.qty\r\n      }\r\n      this.$http.put(api, { data: cart }).then((res) => {\r\n        if (res.data.success) {\r\n          this.$sweetalert2(res)\r\n          this.getCart()\r\n          this.isLoading = false\r\n        }\r\n        if (res.data.success && item.qty === 0) {\r\n          this.updateDelete(item.id)\r\n        }\r\n      })\r\n    }\r\n  },\r\n  created () {\r\n    this.getCart()\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./Cart.vue?vue&type=template&id=abbd8fb6\"\nimport script from \"./Cart.vue?vue&type=script&lang=js\"\nexport * from \"./Cart.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}